<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fala PortuguÃªs, Mano! â€“ Deine Lernplattform</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --green: #00ff87;
  --green-dark: #00cc6a;
  --amber: #f59e0b;
  --red: #ef4444;
  --purple: #8b5cf6;
  --teal: #2dd4bf;
  --bg: #0a0a0a;
  --bg2: #1a1a2e;
  --card: rgba(26,26,46,0.9);
  --card2: rgba(15,15,15,0.95);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'DM Sans', sans-serif;
  background: linear-gradient(180deg, #0a0a0a 0%, #0f0f1a 30%, #0a0a0a 100%);
  color: #fff;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(0,255,135,0.2); border-radius: 2px; }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes pulseGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(0,255,135,0.1); }
  50% { box-shadow: 0 0 40px rgba(0,255,135,0.25); }
}
.animate-in { animation: fadeUp 0.55s ease both; }
.delay-1 { animation-delay: 0.1s; }
.delay-2 { animation-delay: 0.2s; }
.delay-3 { animation-delay: 0.3s; }

/* â”€â”€â”€ HEADER â”€â”€â”€ */
.hero {
  padding: clamp(40px, 8vw, 80px) 20px clamp(28px, 5vw, 44px);
  text-align: center;
  position: relative;
  overflow: hidden;
}
.hero::before {
  content: '';
  position: absolute;
  top: -120px; left: 50%; transform: translateX(-50%);
  width: 650px; height: 650px;
  background: radial-gradient(circle, rgba(0,255,135,0.07) 0%, transparent 70%);
  pointer-events: none;
}
.hero-tag {
  font-size: 12px; font-weight: 700; color: var(--green);
  letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 16px;
}
.hero h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(36px, 7vw, 64px);
  font-weight: 700; line-height: 1.08;
  background: linear-gradient(135deg, #ffffff 30%, var(--green) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  margin-bottom: 16px;
}
.hero p {
  font-size: clamp(14px, 2.5vw, 17px);
  color: #888; max-width: 460px; margin: 0 auto; line-height: 1.65;
}

/* â”€â”€â”€ NAV â”€â”€â”€ */
.nav {
  position: sticky; top: 0; z-index: 50;
  background: linear-gradient(135deg, rgba(15,15,15,0.97), rgba(26,26,46,0.97));
  border-bottom: 1px solid rgba(0,255,135,0.12);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}
.nav-inner {
  max-width: 1200px; margin: 0 auto;
  display: flex; gap: 4px; overflow-x: auto; padding: 12px 16px;
  scrollbar-width: none;
}
.nav-inner::-webkit-scrollbar { display: none; }
.nav-btn {
  padding: 10px 18px; border-radius: 12px;
  border: 1px solid transparent;
  background: transparent; color: #777;
  font-family: 'DM Sans', sans-serif;
  font-size: 14px; font-weight: 600;
  cursor: pointer; transition: all 0.3s; white-space: nowrap;
  letter-spacing: 0.02em;
}
.nav-btn:hover { color: #bbb; }
.nav-btn.active {
  border-color: var(--green);
  background: linear-gradient(135deg, rgba(0,255,135,0.14), rgba(0,200,100,0.06));
  color: var(--green);
}

/* â”€â”€â”€ MAIN â”€â”€â”€ */
main {
  max-width: 960px; margin: 0 auto;
  padding: 40px 20px 80px;
}
.section { display: none; }
.section.active { display: block; animation: fadeUp 0.5s ease; }

/* â”€â”€â”€ PLAN â”€â”€â”€ */
.plan-header { text-align: center; margin-bottom: 44px; }
.plan-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 5vw, 40px); font-weight: 700; color: #fff; margin-bottom: 6px;
}
.plan-header p {
  color: var(--green); font-size: 15px;
  letter-spacing: 0.08em; text-transform: uppercase;
}
.phase {
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 20px; overflow: hidden; margin-bottom: 16px;
  transition: border-color 0.4s;
}
.phase.open { border-color: rgba(0,255,135,0.15); }
.phase-toggle {
  width: 100%; padding: 22px 26px;
  display: flex; justify-content: space-between; align-items: center;
  background: none; border: none; cursor: pointer; text-align: left;
}
.phase-weeks {
  font-size: 12px; font-weight: 700;
  letter-spacing: 0.1em; text-transform: uppercase;
}
.phase-name {
  font-family: 'Playfair Display', serif;
  font-size: clamp(19px, 3vw, 25px); color: #fff; font-weight: 600; margin-top: 3px;
}
.phase-arrow {
  font-size: 22px; transition: transform 0.35s;
}
.phase.open .phase-arrow { transform: rotate(180deg); }
.phase-body {
  display: none; padding: 0 26px 26px;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 14px;
}
.phase.open .phase-body { display: grid; animation: fadeUp 0.4s ease; }
.skill-card {
  background: rgba(0,0,0,0.3); border-radius: 14px;
  padding: 20px; border: 1px solid rgba(255,255,255,0.03);
}
.skill-card .icon { font-size: 26px; margin-bottom: 8px; }
.skill-card h4 { font-size: 14px; font-weight: 700; margin-bottom: 12px; }
.skill-task {
  display: flex; gap: 8px; align-items: flex-start; margin-bottom: 9px;
}
.skill-task .dot { font-size: 9px; margin-top: 6px; flex-shrink: 0; }
.skill-task p { font-size: 13px; color: #ccc; line-height: 1.6; }

/* â”€â”€â”€ PALACE â”€â”€â”€ */
.palace-header { text-align: center; margin-bottom: 36px; }
.palace-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 5vw, 40px); font-weight: 700; margin-bottom: 8px;
}
.palace-header p { color: #aaa; font-size: 14px; max-width: 560px; margin: 0 auto; }
.room-tabs {
  display: flex; gap: 6px; overflow-x: auto;
  padding-bottom: 14px; margin-bottom: 22px;
  scrollbar-width: none;
}
.room-tabs::-webkit-scrollbar { display: none; }
.room-tab {
  padding: 9px 15px; border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.07);
  background: rgba(26,26,46,0.6); color: #777;
  font-size: 13px; font-weight: 600; cursor: pointer;
  white-space: nowrap; transition: all 0.3s;
}
.room-tab.active {
  border-color: var(--amber);
  background: linear-gradient(135deg, rgba(245,158,11,0.18), rgba(245,158,11,0.04));
  color: var(--amber);
}
.room-display {
  background: linear-gradient(145deg, rgba(26,26,46,0.95), rgba(15,15,15,0.98));
  border: 1px solid rgba(245,158,11,0.18);
  border-radius: 24px; padding: clamp(20px, 4vw, 36px);
}
.room-display h3 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(21px, 3.5vw, 29px); color: var(--amber); margin-bottom: 8px;
}
.room-scene {
  font-size: 15px; color: #ddd; line-height: 1.7;
  margin-bottom: 26px; padding: 15px 18px;
  background: rgba(245,158,11,0.05); border-radius: 14px;
  border-left: 3px solid var(--amber); font-style: italic;
}
.words-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: 12px;
}
.word-card {
  background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05);
  border-radius: 14px; padding: 16px; cursor: pointer;
  text-align: left; transition: all 0.3s; width: 100%;
  font-family: 'DM Sans', sans-serif;
}
.word-card.revealed {
  background: linear-gradient(135deg, rgba(245,158,11,0.13), rgba(245,158,11,0.04));
  border-color: rgba(245,158,11,0.28);
}
.word-card .pt {
  font-family: 'Playfair Display', serif;
  font-size: 21px; font-weight: 700; color: var(--amber); margin-bottom: 3px;
}
.word-card .de { font-size: 13px; color: #aaa; }
.word-tip {
  font-size: 12px; color: var(--amber); line-height: 1.6;
  border-top: 1px solid rgba(245,158,11,0.14);
  padding-top: 10px; margin-top: 12px; animation: fadeUp 0.3s ease;
}
.room-progress {
  font-size: 12px; color: #555; text-align: center; margin-top: 18px;
}

/* â”€â”€â”€ SLANG â”€â”€â”€ */
.slang-header { text-align: center; margin-bottom: 36px; }
.slang-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 5vw, 40px); font-weight: 700; margin-bottom: 8px;
}
.slang-header p { color: #aaa; font-size: 14px; max-width: 520px; margin: 0 auto; }
.slang-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(330px, 1fr));
  gap: 10px;
}
.slang-card {
  background: rgba(26,26,46,0.6);
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: 16px; padding: 17px 20px;
  cursor: pointer; text-align: left; width: 100%;
  transition: all 0.3s; font-family: 'DM Sans', sans-serif;
}
.slang-card.open {
  background: linear-gradient(145deg, rgba(139,92,246,0.1), rgba(139,92,246,0.03));
  border-color: rgba(139,92,246,0.25);
}
.slang-top {
  display: flex; justify-content: space-between; align-items: center;
}
.slang-num {
  font-size: 11px; font-weight: 700; color: var(--purple); letter-spacing: 0.05em;
}
.slang-phrase {
  font-family: 'Playfair Display', serif;
  font-size: 19px; color: #fff; font-weight: 600; margin-top: 2px;
}
.slang-arrow {
  font-size: 12px; color: var(--purple); transition: transform 0.3s;
}
.slang-card.open .slang-arrow { transform: rotate(180deg); }
.slang-meaning { font-size: 13px; color: #aaa; margin-top: 4px; }
.slang-details { margin-top: 14px; animation: fadeUp 0.3s ease; }
.slang-tone {
  background: rgba(139,92,246,0.07); border-radius: 10px; padding: 12px; margin-bottom: 10px;
}
.slang-tone .label {
  font-size: 11px; font-weight: 700; color: var(--purple);
  text-transform: uppercase; letter-spacing: 0.08em;
}
.slang-tone p { font-size: 13px; color: #ccc; margin-top: 4px; }
.slang-example {
  background: rgba(0,0,0,0.3); border-radius: 10px; padding: 12px;
  border-left: 3px solid var(--purple);
}
.slang-example .label {
  font-size: 11px; font-weight: 700; color: var(--purple);
  text-transform: uppercase; letter-spacing: 0.08em;
}
.slang-example p {
  font-size: 13px; color: #ddd; margin-top: 4px;
  line-height: 1.7; font-style: italic;
}

/* â”€â”€â”€ QUIZ â”€â”€â”€ */
.quiz-header { text-align: center; margin-bottom: 30px; }
.quiz-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 5vw, 40px); font-weight: 700; margin-bottom: 6px;
}
.quiz-header p { color: #aaa; font-size: 14px; }
.quiz-progress {
  height: 4px; border-radius: 2px;
  background: rgba(255,255,255,0.06); margin-bottom: 30px; overflow: hidden;
}
.quiz-progress-bar {
  height: 100%; border-radius: 2px;
  background: linear-gradient(90deg, var(--green), var(--teal));
  transition: width 0.5s ease;
}
.quiz-card {
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid rgba(0,255,135,0.1);
  border-radius: 24px; padding: clamp(22px, 4vw, 38px);
}
.quiz-meta {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 22px;
}
.quiz-num {
  font-size: 12px; font-weight: 700; color: var(--green);
  letter-spacing: 0.1em; text-transform: uppercase;
}
.quiz-cat {
  font-size: 12px; color: #555;
  background: rgba(255,255,255,0.04); padding: 4px 12px; border-radius: 8px;
}
.quiz-question {
  font-family: 'Playfair Display', serif;
  font-size: clamp(19px, 3vw, 25px);
  color: #fff; font-weight: 600; margin-bottom: 26px; line-height: 1.4;
}
.quiz-options { display: flex; flex-direction: column; gap: 9px; }
.quiz-opt {
  padding: 15px 18px;
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px; cursor: pointer;
  display: flex; align-items: center; gap: 14px;
  transition: all 0.3s; width: 100%;
  font-family: 'DM Sans', sans-serif; font-size: 15px; color: #ccc; font-weight: 500;
  text-align: left;
}
.quiz-opt:hover:not(.disabled) {
  border-color: rgba(255,255,255,0.15);
}
.quiz-opt.correct {
  background: rgba(0,255,135,0.1);
  border-color: rgba(0,255,135,0.4); color: var(--green);
}
.quiz-opt.wrong {
  background: rgba(239,68,68,0.1);
  border-color: rgba(239,68,68,0.4); color: var(--red);
}
.quiz-opt .letter {
  width: 30px; height: 30px; border-radius: 8px;
  background: rgba(255,255,255,0.04);
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; font-weight: 700; color: #555; flex-shrink: 0;
}
.quiz-explanation {
  margin-top: 18px; padding: 14px;
  background: rgba(0,255,135,0.04); border-radius: 12px;
  border-left: 3px solid var(--green);
  font-size: 13px; color: #aaa; line-height: 1.7;
  animation: fadeUp 0.3s ease;
}

/* â”€â”€â”€ QUIZ RESULTS â”€â”€â”€ */
.result-card {
  text-align: center;
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid rgba(0,255,135,0.18);
  border-radius: 24px; padding: clamp(28px, 5vw, 46px); margin-bottom: 28px;
}
.result-card .emoji { font-size: 60px; margin-bottom: 14px; }
.result-card h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 4vw, 36px); font-weight: 700;
}
.result-card .msg { font-size: 15px; color: var(--green); margin-top: 8px; }
.analysis-toggle {
  width: 100%; padding: 17px 22px;
  background: linear-gradient(135deg, rgba(239,68,68,0.12), rgba(239,68,68,0.04));
  border: 1px solid rgba(239,68,68,0.22);
  border-radius: 16px; cursor: pointer; margin-bottom: 18px;
  display: flex; justify-content: space-between; align-items: center;
  font-family: 'DM Sans', sans-serif;
}
.analysis-toggle h3 { font-size: 15px; font-weight: 700; color: var(--red); }
.weak-area {
  background: rgba(26,26,46,0.8);
  border: 1px solid rgba(239,68,68,0.12);
  border-radius: 16px; padding: 18px; margin-bottom: 10px;
}
.weak-area-head {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;
}
.weak-area h4 { font-size: 14px; font-weight: 700; color: var(--red); }
.weak-area .score { font-size: 13px; color: #777; }
.weak-bar {
  height: 6px; border-radius: 3px;
  background: rgba(255,255,255,0.06); overflow: hidden;
}
.weak-bar-fill {
  height: 100%; border-radius: 3px;
  transition: width 1s ease;
}
.weak-tip { font-size: 13px; color: #aaa; margin-top: 10px; line-height: 1.6; }
.answer-review {
  border-radius: 14px; padding: 16px; margin-bottom: 9px;
}
.answer-review.right {
  background: rgba(0,255,135,0.03);
  border: 1px solid rgba(0,255,135,0.1);
}
.answer-review.wrong {
  background: rgba(239,68,68,0.03);
  border: 1px solid rgba(239,68,68,0.1);
}
.retry-btn {
  width: 100%; padding: 16px; margin-top: 22px;
  background: linear-gradient(135deg, var(--green), var(--green-dark));
  border: none; border-radius: 14px; cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  font-size: 15px; font-weight: 700; color: #0f0f0f;
}

/* â”€â”€â”€ CONVERSA â”€â”€â”€ */
.conv-header { text-align: center; margin-bottom: 30px; }
.conv-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px, 5vw, 40px); font-weight: 700; margin-bottom: 8px;
}
.conv-header p { color: #aaa; font-size: 14px; max-width: 520px; margin: 0 auto; }
.conv-locked {
  text-align: center;
  background: rgba(26,26,46,0.8);
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 24px; padding: 46px;
}
.conv-locked .lock { font-size: 46px; }
.conv-locked h3 {
  font-family: 'Playfair Display', serif;
  font-size: 21px; margin-top: 14px;
}
.conv-locked p { font-size: 13px; color: #777; margin-top: 8px; }
.start-btn {
  padding: 17px 46px;
  background: linear-gradient(135deg, var(--green), var(--green-dark));
  border: none; border-radius: 16px; cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  font-size: 16px; font-weight: 700; color: #0f0f0f;
  box-shadow: 0 0 40px rgba(0,255,135,0.18);
  animation: pulseGlow 3s ease-in-out infinite;
}
.chat-container {
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid rgba(0,255,135,0.1);
  border-radius: 24px; overflow: hidden;
}
.chat-messages {
  height: 410px; overflow-y: auto; padding: 22px;
  display: flex; flex-direction: column; gap: 14px;
}
.msg-row { display: flex; }
.msg-row.user { justify-content: flex-end; }
.msg-row.bot { justify-content: flex-start; }
.msg-bubble {
  max-width: 80%; padding: 13px 17px;
  font-size: 14px; line-height: 1.7; white-space: pre-line;
}
.msg-bubble.bot {
  border-radius: 18px 18px 18px 4px;
  background: rgba(255,255,255,0.06); color: #ddd;
}
.msg-bubble.user {
  border-radius: 18px 18px 4px 18px;
  background: linear-gradient(135deg, var(--green), var(--green-dark));
  color: #0f0f0f; font-weight: 600;
}
.msg-tag {
  font-size: 10px; color: var(--green); font-weight: 700;
  letter-spacing: 0.05em; display: block; margin-bottom: 4px;
}
.msg-hint {
  margin-top: 8px; padding: 9px 12px;
  background: rgba(245,158,11,0.05); border-radius: 10px;
  border-left: 2px solid var(--amber);
  font-size: 12px; color: var(--amber); max-width: 80%;
}
.chat-input-bar {
  padding: 14px 22px;
  border-top: 1px solid rgba(255,255,255,0.05);
  display: flex; gap: 10px;
}
.chat-input-bar input {
  flex: 1; padding: 13px 17px;
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 14px; color: #fff;
  font-family: 'DM Sans', sans-serif;
  font-size: 14px; outline: none;
}
.chat-input-bar input::placeholder { color: #444; }
.chat-input-bar input:focus { border-color: rgba(0,255,135,0.3); }
.send-btn {
  padding: 13px 22px;
  background: linear-gradient(135deg, var(--green), var(--green-dark));
  border: none; border-radius: 14px; cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  font-size: 14px; font-weight: 700; color: #0f0f0f;
}

/* â”€â”€â”€ FOOTER â”€â”€â”€ */
footer {
  text-align: center; padding: 22px 20px;
  border-top: 1px solid rgba(255,255,255,0.03);
}
footer p { font-size: 12px; color: #383838; }

@media (max-width: 600px) {
  .slang-grid { grid-template-columns: 1fr; }
  .words-grid { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â• -->
<header class="hero">
  <div class="hero-tag animate-in">PortuguÃªs do Brasil</div>
  <h1 class="animate-in delay-1">Fala PortuguÃªs,<br>Mano!</h1>
  <p class="animate-in delay-2">Deine Lernplattform fÃ¼r brasilianisches Portugiesisch.<br>Von Null auf FluÃªncia â€“ mit echtem Slang und StraÃŸensprache.</p>
</header>

<!-- â•â•â•â•â•â•â• NAV â•â•â•â•â•â•â• -->
<nav class="nav">
  <div class="nav-inner">
    <button class="nav-btn active" data-section="plan" onclick="switchSection('plan')">ğŸ“‹ Lernplan</button>
    <button class="nav-btn" data-section="palace" onclick="switchSection('palace')">ğŸ›ï¸ GedÃ¤chtnispalast</button>
    <button class="nav-btn" data-section="slang" onclick="switchSection('slang')">ğŸ—£ï¸ Slang & GÃ­rias</button>
    <button class="nav-btn" data-section="quiz" onclick="switchSection('quiz')">âœï¸ Quiz</button>
    <button class="nav-btn" data-section="conversa" onclick="switchSection('conversa')">ğŸ’¬ Conversa DiÃ¡ria</button>
  </div>
</nav>

<main>

<!-- â•â•â•â•â•â•â• LERNPLAN â•â•â•â•â•â•â• -->
<div id="sec-plan" class="section active">
  <div class="plan-header">
    <h2>Dein 6-Monats-Fluency-Plan</h2>
    <p>Von Null auf Portugiesisch â€“ Schritt fÃ¼r Schritt</p>
  </div>
  <div id="phases-container"></div>
</div>

<!-- â•â•â•â•â•â•â• GEDÃ„CHTNISPALAST â•â•â•â•â•â•â• -->
<div id="sec-palace" class="section">
  <div class="palace-header">
    <h2>ğŸ›ï¸ Dein GedÃ¤chtnispalast</h2>
    <p>Geh durch 10 RÃ¤ume. Jeder Raum hat eine verrÃ¼ckte Szene und 5 WÃ¶rter. Klick auf ein Wort, um den GedÃ¤chtnistrick zu sehen.</p>
  </div>
  <div class="room-tabs" id="room-tabs"></div>
  <div class="room-display" id="room-display"></div>
</div>

<!-- â•â•â•â•â•â•â• SLANG â•â•â•â•â•â•â• -->
<div id="sec-slang" class="section">
  <div class="slang-header">
    <h2>ğŸ—£ï¸ 20 GÃ­rias Brasileiras</h2>
    <p>Slang, den echte Brasilianer jeden Tag benutzen. Kein Lehrbuch bringt dir das bei.</p>
  </div>
  <div class="slang-grid" id="slang-grid"></div>
</div>

<!-- â•â•â•â•â•â•â• QUIZ â•â•â•â•â•â•â• -->
<div id="sec-quiz" class="section">
  <div class="quiz-header">
    <h2>âœï¸ Teste dein Wissen</h2>
    <p>10 Fragen â€“ Finde heraus, wo du stehst</p>
  </div>
  <div id="quiz-container"></div>
</div>

<!-- â•â•â•â•â•â•â• CONVERSA â•â•â•â•â•â•â• -->
<div id="sec-conversa" class="section">
  <div class="conv-header">
    <h2>ğŸ’¬ Conversa DiÃ¡ria</h2>
    <p>5-Minuten-GesprÃ¤ch mit einem virtuellen Brasilianer. NatÃ¼rliche Sprache, echte GÃ­rias.</p>
  </div>
  <div id="conv-container"></div>
</div>

</main>

<footer>
  <p>Feito com ğŸ’š para aprender portuguÃªs Â· Vamos nessa! ğŸ‡§ğŸ‡·</p>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const phases = [
  {
    name: "Fase 1: Fundamento", weeks: "Woche 1â€“4", color: "#2dd4bf",
    skills: [
      { icon: "ğŸ‘‚", name: "HÃ¶ren (Ouvir)", tasks: [
        "15 Min/Tag: Brasilianische Musik mit Lyrics (Marisa Monte, Gilberto Gil)",
        "Podcast 'CafÃ© Brasil' â€“ nur zuhÃ¶ren, nicht verstehen mÃ¼ssen",
        "YouTube: 'Portuguese With Leo' â€“ AnfÃ¤nger-Dialoge"
      ]},
      { icon: "ğŸ—£ï¸", name: "Sprechen (Falar)", tasks: [
        "10 Min/Tag: Nachsprechen von BegrÃ¼ÃŸungen & Zahlen",
        "Sprachaufnahme: Nimm dich selbst auf und vergleiche",
        "Spiegel-Ãœbung: Stell dich vor auf Portugiesisch"
      ]},
      { icon: "ğŸ“–", name: "Lesen (Ler)", tasks: [
        "KinderbÃ¼cher auf Portugiesisch (z.B. 'O Pequeno PrÃ­ncipe')",
        "TÃ¤gliche Vokabelliste: 10 neue WÃ¶rter",
        "Instagram-Accounts: @aprabortuguese"
      ]},
      { icon: "âœï¸", name: "Schreiben (Escrever)", tasks: [
        "Tagebuch: 3 SÃ¤tze pro Tag auf Portugiesisch",
        "Vokabelkarten schreiben (handschriftlich!)",
        "WhatsApp-Nachrichten an dich selbst auf Portugiesisch"
      ]}
    ]
  },
  {
    name: "Fase 2: ConstruÃ§Ã£o", weeks: "Woche 5â€“12", color: "#f59e0b",
    skills: [
      { icon: "ğŸ‘‚", name: "HÃ¶ren (Ouvir)", tasks: [
        "20 Min/Tag: Brasilianische Serien mit PT-Untertiteln (3%, Cidade InvisÃ­vel)",
        "Podcast 'Fala Gringo' â€“ mittleres Niveau",
        "Musik: Versuche mitzusingen (Anitta, Jorge Ben Jor)"
      ]},
      { icon: "ğŸ—£ï¸", name: "Sprechen (Falar)", tasks: [
        "15 Min/Tag: Tandem-Partner auf iTalki finden",
        "Rollenspiele: Im Restaurant bestellen, nach dem Weg fragen",
        "Shadowing: Sprich Podcasts Wort fÃ¼r Wort nach"
      ]},
      { icon: "ğŸ“–", name: "Lesen (Ler)", tasks: [
        "Nachrichten: Globo.com Schlagzeilen lesen",
        "Kurzgeschichten: Clarice Lispector (vereinfacht)",
        "Reddit: r/brasil â€“ echte Konversationen lesen"
      ]},
      { icon: "âœï¸", name: "Schreiben (Escrever)", tasks: [
        "Tagebuch: 1 Absatz pro Tag",
        "Kommentare auf brasilianischen Social-Media-Seiten",
        "Kurze E-Mails/Nachrichten an Tandem-Partner"
      ]}
    ]
  },
  {
    name: "Fase 3: FluÃªncia", weeks: "Woche 13â€“24", color: "#ef4444",
    skills: [
      { icon: "ğŸ‘‚", name: "HÃ¶ren (Ouvir)", tasks: [
        "30 Min/Tag: Filme ohne Untertitel (Tropa de Elite, Central do Brasil)",
        "Brasilianische YouTuber: Felipe Neto, Whindersson Nunes",
        "HÃ¶rbÃ¼cher auf Portugiesisch"
      ]},
      { icon: "ğŸ—£ï¸", name: "Sprechen (Falar)", tasks: [
        "20 Min/Tag: Freie Konversation mit Muttersprachlern",
        "PrÃ¤sentationen auf Portugiesisch vorbereiten",
        "Am Telefon auf Portugiesisch sprechen (hÃ¤rteste Ãœbung!)"
      ]},
      { icon: "ğŸ“–", name: "Lesen (Ler)", tasks: [
        "Romane: Paulo Coelho, Machado de Assis",
        "Fachartikel in deinem Berufsfeld",
        "Brasilianische Blogs und Meinungsartikel"
      ]},
      { icon: "âœï¸", name: "Schreiben (Escrever)", tasks: [
        "Blog-BeitrÃ¤ge oder Rezensionen auf Portugiesisch",
        "Berufliche E-Mails auf Portugiesisch",
        "Kreatives Schreiben: Kurzgeschichten"
      ]}
    ]
  }
];

const palace = [
  { room:"ğŸšª Eingang (Entrada)", scene:"Du Ã¶ffnest eine riesige HolztÃ¼r. Ein goldener SchlÃ¼ssel fÃ¤llt herunter.", words:[
    {pt:"OlÃ¡",de:"Hallo",tip:"Der SchlÃ¼ssel ruft 'OlÃ¡!' wenn er fÃ¤llt"},
    {pt:"Sim",de:"Ja",tip:"Die TÃ¼r nickt â€“ SIM!"},
    {pt:"NÃ£o",de:"Nein",tip:"Die TÃ¼r schÃ¼ttelt sich â€“ NÃƒO!"},
    {pt:"Obrigado/a",de:"Danke",tip:"Ein Schild Ã¼ber der TÃ¼r: OBRIGADO"},
    {pt:"Por favor",de:"Bitte",tip:"Eine FuÃŸmatte mit 'POR FAVOR'"}
  ]},
  { room:"ğŸ›‹ï¸ Wohnzimmer (Sala)", scene:"Ein buntes Sofa explodiert mit Konfetti. Ein Papagei sitzt auf dem Fernseher.", words:[
    {pt:"Casa",de:"Haus",tip:"Das Sofa IST das ganze Haus â€“ CASA"},
    {pt:"Ãgua",de:"Wasser",tip:"Wasser sprudelt aus dem Fernseher â€“ ÃGUA"},
    {pt:"Comida",de:"Essen",tip:"Der Papagei frisst Pizza â€“ COMIDA!"},
    {pt:"Bom",de:"Gut",tip:"Konfetti = BOM! Party!"},
    {pt:"Mau",de:"Schlecht",tip:"Der Papagei beiÃŸt â€“ MAU!"}
  ]},
  { room:"ğŸ³ KÃ¼che (Cozinha)", scene:"Ein Koch tanzt Samba und wirft Pfannkuchen in die Luft. Alles riecht nach Kaffee.", words:[
    {pt:"CafÃ©",de:"Kaffee",tip:"Der Koch trinkt CAFÃ‰ und tanzt schneller"},
    {pt:"PÃ£o",de:"Brot",tip:"PÃƒO fliegt wie ein Frisbee durch die KÃ¼che"},
    {pt:"Comer",de:"Essen (Verb)",tip:"Der Koch stopft alles rein â€“ COMER!"},
    {pt:"Beber",de:"Trinken",tip:"Er trinkt aus einem Feuerwehrschlauch â€“ BEBER"},
    {pt:"Quente",de:"HeiÃŸ",tip:"Der Herd explodiert â€“ QUENTE!"}
  ]},
  { room:"ğŸ›ï¸ Schlafzimmer (Quarto)", scene:"Das Bett schwebt in der Luft. Ein Mond aus KÃ¤se leuchtet durchs Fenster.", words:[
    {pt:"Dormir",de:"Schlafen",tip:"Du fÃ¤llst aufs schwebende Bett â€“ DORMIR"},
    {pt:"Noite",de:"Nacht",tip:"Der KÃ¤se-Mond flÃ¼stert NOITE"},
    {pt:"Dia",de:"Tag",tip:"PlÃ¶tzlich Sonnenlicht â€“ DIA!"},
    {pt:"ManhÃ£",de:"Morgen",tip:"Der Wecker schreit MANHÃƒ!"},
    {pt:"Sonho",de:"Traum",tip:"Du trÃ¤umst du fliegst â€“ SONHO"}
  ]},
  { room:"ğŸš¿ Badezimmer (Banheiro)", scene:"Der Spiegel spricht mit dir. Die Dusche regnet bunte Farben.", words:[
    {pt:"Bonito/a",de:"SchÃ¶n",tip:"Der Spiegel sagt: 'VocÃª Ã© BONITO!'"},
    {pt:"Grande",de:"GroÃŸ",tip:"Du wÃ¤chst im Spiegel â€“ GRANDE!"},
    {pt:"Pequeno",de:"Klein",tip:"Du schrumpfst â€“ PEQUENO!"},
    {pt:"Frio",de:"Kalt",tip:"Kalte Dusche â€“ FRIO! Du zitterst"},
    {pt:"Limpo",de:"Sauber",tip:"Alles glÃ¤nzt nach der Dusche â€“ LIMPO"}
  ]},
  { room:"ğŸŒ³ Garten (Jardim)", scene:"Riesige tropische Pflanzen. Ein Affe spielt Gitarre auf einer HÃ¤ngematte.", words:[
    {pt:"Sol",de:"Sonne",tip:"Die Sonne hat ein Gesicht â€“ SOL lÃ¤chelt"},
    {pt:"Chuva",de:"Regen",tip:"PlÃ¶tzlich CHUVA â€“ der Affe versteckt sich"},
    {pt:"Flor",de:"Blume",tip:"Eine riesige FLOR wÃ¤chst vor deinen Augen"},
    {pt:"Verde",de:"GrÃ¼n",tip:"Alles ist VERDE â€“ sogar der Affe"},
    {pt:"Ãrvore",de:"Baum",tip:"Eine ÃRVORE tanzt im Wind"}
  ]},
  { room:"ğŸš— Garage (Garagem)", scene:"Ein gelbes Taxi mit FlÃ¼geln. Der Motor spielt Bossa Nova.", words:[
    {pt:"Carro",de:"Auto",tip:"Das fliegende CARRO hebt ab!"},
    {pt:"Rua",de:"StraÃŸe",tip:"Die RUA vor der Garage ist aus Gold"},
    {pt:"Ir",de:"Gehen",tip:"Das Taxi sagt: 'Vamos IR!' â€“ Los geht's!"},
    {pt:"RÃ¡pido",de:"Schnell",tip:"Das Taxi fliegt RÃPIDO durch die Wolken"},
    {pt:"Devagar",de:"Langsam",tip:"Du bremst â€“ DEVAGAR! GemÃ¼tlich."}
  ]},
  { room:"ğŸª Laden (Loja)", scene:"Ein Markt voller Farben. Eine alte Frau verkauft sprechende FrÃ¼chte.", words:[
    {pt:"Dinheiro",de:"Geld",tip:"DINHEIRO regnet vom Dach des Ladens"},
    {pt:"Comprar",de:"Kaufen",tip:"Du willst alles COMPRAR â€“ die FrÃ¼chte rufen dich!"},
    {pt:"Barato",de:"Billig",tip:"Die Ananas schreit: 'BARATO! Nimm mich!'"},
    {pt:"Caro",de:"Teuer",tip:"Die Mango trÃ¤gt Goldketten â€“ CARO!"},
    {pt:"Muito",de:"Viel/Sehr",tip:"MUITO FrÃ¼chte! Der Laden platzt!"}
  ]},
  { room:"ğŸ­ Theater (Teatro)", scene:"Scheinwerfer gehen an. Du stehst auf der BÃ¼hne vor tausend Papageien.", words:[
    {pt:"Falar",de:"Sprechen",tip:"Du musst FALAR â€“ die Papageien warten!"},
    {pt:"Entender",de:"Verstehen",tip:"Die Papageien nicken â€“ sie ENTENDER!"},
    {pt:"DifÃ­cil",de:"Schwierig",tip:"Die Rede ist DIFÃCIL â€“ du stotterst"},
    {pt:"FÃ¡cil",de:"Einfach",tip:"Dann wird's FÃCIL â€“ du sprichst flieÃŸend!"},
    {pt:"Tentar",de:"Versuchen",tip:"Du musst es TENTAR â€“ trau dich!"}
  ]},
  { room:"ğŸŒ… Dachterrasse (TerraÃ§o)", scene:"Sonnenuntergang Ã¼ber Rio. Die Christus-Statue winkt dir zu.", words:[
    {pt:"Amor",de:"Liebe",tip:"Christus formt ein Herz â€“ AMOR!"},
    {pt:"Vida",de:"Leben",tip:"Du atmest tief ein â€“ das ist VIDA!"},
    {pt:"Feliz",de:"GlÃ¼cklich",tip:"Du lÃ¤chelst Ã¼ber ganz Rio â€“ FELIZ!"},
    {pt:"Sempre",de:"Immer",tip:"Die Sonne geht SEMPRE unter â€“ jeden Tag"},
    {pt:"Agora",de:"Jetzt",tip:"AGORA ist der Moment â€“ genieÃŸ es!"}
  ]}
];

const slangData = [
  {phrase:"E aÃ­?",meaning:"Und? / Was geht?",tone:"Super lÃ¤ssig, unter Freunden",example:"E aÃ­, mano? Tudo bem? â€“ Ey, Alter, alles klar?"},
  {phrase:"Beleza!",meaning:"Alles klar! / Cool!",tone:"Zustimmend, entspannt",example:"Vamos Ã s 8? â€“ Beleza! â†’ Gehen wir um 8? â€“ Alles klar!"},
  {phrase:"Cara / Mano",meaning:"Alter / Typ / Kumpel",tone:"Informell, wie 'Dude' auf Englisch",example:"Cara, tu nÃ£o vai acreditar! â€“ Alter, du glaubst es nicht!"},
  {phrase:"TÃ¡ ligado?",meaning:"Verstehst du? / WeiÃŸt du?",tone:"StraÃŸensprache, jugendlich",example:"Ele Ã© gente boa, tÃ¡ ligado? â€“ Er ist cool, weiÃŸt du?"},
  {phrase:"Valeu!",meaning:"Danke! / TschÃ¼ss!",tone:"Sehr informell, unter Freunden",example:"Valeu, mano! Falou! â€“ Danke, Alter! Bis dann!"},
  {phrase:"Que massa!",meaning:"Wie geil! / Wie cool!",tone:"Begeistert, positiv",example:"Ganhei um carro novo! â€“ Que massa! â†’ Ich hab ein neues Auto! â€“ Wie geil!"},
  {phrase:"TÃ´ nem aÃ­",meaning:"Ist mir egal / Juckt mich nicht",tone:"GleichgÃ¼ltig, kann frech wirken",example:"Ele tÃ¡ falando mal de mim. â€“ TÃ´ nem aÃ­. â†’ Er redet schlecht Ã¼ber mich. â€“ Juckt mich nicht."},
  {phrase:"PÃ´!",meaning:"Mensch! / Ach Mann!",tone:"Frustriert oder Ã¼berrascht",example:"PÃ´, esqueci a carteira! â€“ Mensch, ich hab die GeldbÃ¶rse vergessen!"},
  {phrase:"Saudade",meaning:"Sehnsucht / Vermissen (unÃ¼bersetzbar!)",tone:"Emotional, tiefgrÃ¼ndig",example:"TÃ´ com saudade de vocÃª. â€“ Ich vermisse dich so sehr."},
  {phrase:"Gata / Gato",meaning:"HÃ¼bsche Frau / HeiÃŸer Typ (wÃ¶rtl. Katze)",tone:"Flirty, Kompliment",example:"Olha aquela gata! â€“ Schau dir die HÃ¼bsche an!"},
  {phrase:"Falou!",meaning:"Abgemacht! / TschÃ¼ss!",tone:"LÃ¤ssig, zum Abschied",example:"AmanhÃ£ Ã s 10, falou! â€“ Morgen um 10, abgemacht!"},
  {phrase:"Caramba!",meaning:"Wow! / Verdammt!",tone:"Ãœberrascht, nicht vulgÃ¤r",example:"Caramba, que jogo! â€“ Wow, was fÃ¼r ein Spiel!"},
  {phrase:"Pode crer!",meaning:"Stimmt! / Ja, voll!",tone:"Zustimmend, bestÃ¤tigend",example:"Essa pizza Ã© a melhor. â€“ Pode crer! â†’ Diese Pizza ist die beste. â€“ Ja, voll!"},
  {phrase:"TÃ´ de boa",meaning:"Mir geht's gut / Ich chill",tone:"Entspannt, relaxed",example:"Quer sair? â€“ NÃ£o, tÃ´ de boa. â†’ Willst du rausgehen? â€“ Nee, ich chill."},
  {phrase:"MermÃ£o",meaning:"Bruder (meu irmÃ£o verkÃ¼rzt)",tone:"Sehr informell, Rio-Slang",example:"MermÃ£o, para com isso! â€“ Bruder, hÃ¶r auf damit!"},
  {phrase:"Suave",meaning:"Easy / Entspannt / Kein Problem",tone:"Cool, gelassen",example:"Deu pra fazer? â€“ Suave! â†’ Hast du's geschafft? â€“ Easy!"},
  {phrase:"Partiu!",meaning:"Los geht's! / Auf geht's!",tone:"Motivierend, Aufbruch",example:"Partiu praia! â€“ Ab an den Strand!"},
  {phrase:"Vacilou",meaning:"Du hast Mist gebaut / Fail",tone:"Vorwurfsvoll, aber oft spielerisch",example:"Esqueceu o aniversÃ¡rio dela? Vacilou, hein! â€“ Ihren Geburtstag vergessen? Fail, ey!"},
  {phrase:"Bora!",meaning:"Los! / Komm! (von 'vamos embora')",tone:"Energisch, auffordernd",example:"Bora almoÃ§ar? â€“ Komm, Mittagessen?"},
  {phrase:"Zoar",meaning:"Verarschen / Rumalbern",tone:"SpaÃŸig, unter Kumpels",example:"Para de me zoar! â€“ HÃ¶r auf mich zu verarschen!"}
];

const quizQuestions = [
  {q:"Wie sagt man 'Guten Morgen' auf Portugiesisch?",options:["Boa noite","Bom dia","Boa tarde","Bom tempo"],correct:1,category:"BegrÃ¼ÃŸungen",explanation:"'Bom dia' = Guten Morgen. 'Boa tarde' = Guten Nachmittag. 'Boa noite' = Guten Abend/Gute Nacht."},
  {q:"Was bedeutet 'Obrigado'?",options:["Bitte","Entschuldigung","Danke","TschÃ¼ss"],correct:2,category:"Grundvokabular",explanation:"'Obrigado' (mÃ¤nnlich) / 'Obrigada' (weiblich) = Danke. Ein Mann sagt immer 'obrigado', eine Frau 'obrigada'."},
  {q:"Ãœbersetze: 'Eu quero Ã¡gua'",options:["Ich brauche Hilfe","Ich will Wasser","Ich habe Hunger","Ich trinke Kaffee"],correct:1,category:"GrundsÃ¤tze",explanation:"'Eu' = Ich, 'quero' = will, 'Ã¡gua' = Wasser. 'Querer' ist ein wichtiges Verb!"},
  {q:"Welches Wort bedeutet 'Haus'?",options:["Carro","Casa","Cama","CafÃ©"],correct:1,category:"Grundvokabular",explanation:"'Casa' = Haus. 'Carro' = Auto, 'Cama' = Bett, 'CafÃ©' = Kaffee."},
  {q:"Was bedeutet 'E aÃ­?' im Slang?",options:["Wohin gehst du?","Was geht?","Wie heiÃŸt du?","Wo bist du?"],correct:1,category:"Slang",explanation:"'E aÃ­?' ist super informell und bedeutet 'Was geht?' oder 'Und?' â€“ wird stÃ¤ndig benutzt!"},
  {q:"Wie zÃ¤hlt man auf Portugiesisch: 1, 2, 3?",options:["uno, dos, tres","um, dois, trÃªs","en, to, tre","bir, iki, Ã¼Ã§"],correct:1,category:"Zahlen",explanation:"'Um, dois, trÃªs' â€“ Vorsicht, nicht mit Spanisch verwechseln! (uno, dos, tres)."},
  {q:"'Eu sou da Alemanha' bedeutet:",options:["Ich liebe Deutschland","Ich bin aus Deutschland","Ich fahre nach Deutschland","Ich kenne Deutschland"],correct:1,category:"Selbstvorstellung",explanation:"'Eu sou' = Ich bin, 'da Alemanha' = aus Deutschland. Perfekt um sich vorzustellen!"},
  {q:"Was ist die korrekte Verneinung von 'Eu falo portuguÃªs'?",options:["Eu no falo portuguÃªs","Eu nÃ£o falo portuguÃªs","Eu nem falo portuguÃªs","Eu nunca falo portuguÃªs"],correct:1,category:"Grammatik",explanation:"'NÃ£o' ist die Standard-Verneinung. Es steht VOR dem Verb: 'Eu nÃ£o falo' = Ich spreche nicht."},
  {q:"Was bedeutet 'Saudade'?",options:["Gesundheit","Sehnsucht/Vermissen","Freude","Freiheit"],correct:1,category:"Kultur & Vokabular",explanation:"'Saudade' ist DAS portugiesische Wort schlechthin â€“ ein tiefes GefÃ¼hl des Vermissens. Es gibt keine exakte Ãœbersetzung!"},
  {q:"VervollstÃ¤ndige: 'Muito _____ te conhecer' (Freut mich dich kennenzulernen)",options:["bom","bem","prazer","feliz"],correct:2,category:"Redewendungen",explanation:"'Muito prazer' = Sehr erfreut / Freut mich. Eine der wichtigsten Redewendungen beim Kennenlernen!"}
];

const conversationFlow = [
  {bot:"E aÃ­! Tudo bem? ğŸ˜„\n(Ey! Alles klar?)",hint:"Antworte z.B. mit: 'Tudo bem!' oder 'Tudo bom!'"},
  {bot:"Que bom! Como Ã© seu nome?\n(SchÃ¶n! Wie ist dein Name?)",hint:"Sag: 'Meu nome Ã© [dein Name]' oder einfach 'Eu sou [Name]'"},
  {bot:"Prazer, {name}! VocÃª Ã© de onde?\n(Freut mich! Woher bist du?)",hint:"Antworte: 'Eu sou da Alemanha' (Ich bin aus Deutschland)"},
  {bot:"Da Alemanha? Que massa! ğŸ‡©ğŸ‡ª Eu sou do Brasil, de SÃ£o Paulo.\n(Aus Deutschland? Wie cool! Ich bin aus Brasilien, aus SÃ£o Paulo.)",hint:"Frag: 'VocÃª gosta de SÃ£o Paulo?' (Magst du SÃ£o Paulo?)"},
  {bot:"Adoro SÃ£o Paulo! Tem muita coisa pra fazer. E vocÃª, tÃ¡ estudando portuguÃªs hÃ¡ quanto tempo?\n(Ich liebe SP! Es gibt viel zu tun. Und du, wie lange lernst du schon Portugiesisch?)",hint:"Sag: 'Comecei agora!' (Hab gerade angefangen!) oder 'Pouco tempo' (Nicht lange)"},
  {bot:"PÃ´, mas tÃ¡ mandando bem! Continue assim! ğŸ’ª Valeu pela conversa!\n(Mensch, aber du machst das gut! Mach weiter so! Danke fÃ¼r das GesprÃ¤ch!)",hint:"Antworte: 'Valeu! Falou!' (Danke! Bis dann!)"}
];

const categoryTips = {
  "BegrÃ¼ÃŸungen": "Ãœbe die drei Tageszeiten â€“ manhÃ£ (Morgen), tarde (Nachmittag), noite (Abend). Die BegrÃ¼ÃŸungen folgen dem gleichen Muster!",
  "Grundvokabular": "Geh nochmal durch den GedÃ¤chtnispalast! Die verrÃ¼ckten Szenen helfen dir, die WÃ¶rter sofort zu erinnern.",
  "GrundsÃ¤tze": "Lerne die Struktur 'Eu + Verb + Objekt'. Auf Portugiesisch ist die Satzstellung Ã¤hnlich wie im Deutschen!",
  "Slang": "Slang kommt mit der Zeit. Schau brasilianische YouTuber und achte auf die informelle Sprache.",
  "Zahlen": "Verwechsle Portugiesisch nicht mit Spanisch! Ãœbe die Zahlen 1-20 jeden Tag beim Treppensteigen.",
  "Selbstvorstellung": "Ãœbe 'Eu sou...' (Ich bin...) + 'Eu sou da/de...' (Ich bin aus...) â€“ das brauchst du stÃ¤ndig!",
  "Grammatik": "Die Verneinung ist simpel â€“ 'nÃ£o' vor das Verb! 'Eu nÃ£o sei' (Ich weiÃŸ nicht), 'Eu nÃ£o quero' (Ich will nicht).",
  "Kultur & Vokabular": "'Saudade' ist DIE portugiesische Emotion. HÃ¶r den Song 'Chega de Saudade' von JoÃ£o Gilberto!",
  "Redewendungen": "Lerne feste AusdrÃ¼cke als BlÃ¶cke: 'Muito prazer', 'Com licenÃ§a', 'Tudo bem?' â€“ nicht Wort fÃ¼r Wort!"
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let activeSection = 'plan';
let activeRoom = 0;
let revealedWords = {};
let openSlang = -1;
let quizState = { current: 0, answers: [], selected: null, done: false, showAnalysis: false };
let quizCompleted = false;
let convState = { started: false, messages: [], botStep: 0 };

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchSection(id) {
  activeSection = id;
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('sec-' + id).classList.add('active');
  document.querySelectorAll('.nav-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.section === id);
  });
  if (id === 'conversa') renderConversa();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLAN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPhases() {
  const c = document.getElementById('phases-container');
  c.innerHTML = phases.map((p, i) => `
    <div class="phase ${i === 0 ? 'open' : ''}" id="phase-${i}">
      <button class="phase-toggle" onclick="togglePhase(${i})">
        <div>
          <span class="phase-weeks" style="color:${p.color}">${p.weeks}</span>
          <h3 class="phase-name">${p.name}</h3>
        </div>
        <span class="phase-arrow" style="color:${p.color}">â–¾</span>
      </button>
      <div class="phase-body">
        ${p.skills.map(s => `
          <div class="skill-card">
            <div class="icon">${s.icon}</div>
            <h4 style="color:${p.color}">${s.name}</h4>
            ${s.tasks.map(t => `
              <div class="skill-task">
                <span class="dot" style="color:${p.color}">â—</span>
                <p>${t}</p>
              </div>
            `).join('')}
          </div>
        `).join('')}
      </div>
    </div>
  `).join('');
}
function togglePhase(i) {
  const el = document.getElementById('phase-' + i);
  const wasOpen = el.classList.contains('open');
  document.querySelectorAll('.phase').forEach(p => p.classList.remove('open'));
  if (!wasOpen) el.classList.add('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PALACE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderRoomTabs() {
  const c = document.getElementById('room-tabs');
  c.innerHTML = palace.map((_, i) => `
    <button class="room-tab ${i === activeRoom ? 'active' : ''}" onclick="selectRoom(${i})">Raum ${i + 1}</button>
  `).join('');
}
function selectRoom(i) {
  activeRoom = i;
  renderRoomTabs();
  renderRoom();
}
function renderRoom() {
  const r = palace[activeRoom];
  const d = document.getElementById('room-display');
  d.innerHTML = `
    <h3>${r.room}</h3>
    <p class="room-scene">ğŸ¬ ${r.scene}</p>
    <div class="words-grid">
      ${r.words.map((w, wi) => {
        const key = activeRoom + '-' + wi;
        const rev = revealedWords[key];
        return `
          <button class="word-card ${rev ? 'revealed' : ''}" onclick="toggleWord(${activeRoom},${wi})">
            <div class="pt">${w.pt}</div>
            <div class="de">= ${w.de}</div>
            ${rev ? `<div class="word-tip">ğŸ’¡ ${w.tip}</div>` : ''}
          </button>
        `;
      }).join('')}
    </div>
    <p class="room-progress">Fortschritt: ${activeRoom + 1}/10 RÃ¤ume Â· ${(activeRoom + 1) * 5}/50 WÃ¶rter</p>
  `;
}
function toggleWord(ri, wi) {
  const key = ri + '-' + wi;
  revealedWords[key] = !revealedWords[key];
  renderRoom();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SLANG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderSlang() {
  const c = document.getElementById('slang-grid');
  c.innerHTML = slangData.map((s, i) => `
    <button class="slang-card ${openSlang === i ? 'open' : ''}" onclick="toggleSlang(${i})">
      <div class="slang-top">
        <div>
          <span class="slang-num">#${String(i+1).padStart(2,'0')}</span>
          <h4 class="slang-phrase">â€${s.phrase}"</h4>
        </div>
        <span class="slang-arrow">â–¾</span>
      </div>
      <p class="slang-meaning">â†’ ${s.meaning}</p>
      ${openSlang === i ? `
        <div class="slang-details">
          <div class="slang-tone">
            <span class="label">Ton / Stimmung</span>
            <p>${s.tone}</p>
          </div>
          <div class="slang-example">
            <span class="label">Beispiel</span>
            <p>${s.example}</p>
          </div>
        </div>
      ` : ''}
    </button>
  `).join('');
}
function toggleSlang(i) {
  openSlang = openSlang === i ? -1 : i;
  renderSlang();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderQuiz() {
  const c = document.getElementById('quiz-container');
  if (quizState.done) {
    renderQuizResults(c);
    return;
  }
  const q = quizQuestions[quizState.current];
  c.innerHTML = `
    <div class="quiz-progress"><div class="quiz-progress-bar" style="width:${(quizState.current / quizQuestions.length) * 100}%"></div></div>
    <div class="quiz-card">
      <div class="quiz-meta">
        <span class="quiz-num">Frage ${quizState.current + 1}/10</span>
        <span class="quiz-cat">${q.category}</span>
      </div>
      <h3 class="quiz-question">${q.q}</h3>
      <div class="quiz-options">
        ${q.options.map((opt, oi) => {
          let cls = 'quiz-opt';
          if (quizState.selected !== null) {
            cls += ' disabled';
            if (oi === q.correct) cls += ' correct';
            else if (oi === quizState.selected && oi !== q.correct) cls += ' wrong';
          }
          return `
            <button class="${cls}" onclick="quizSelect(${oi})" ${quizState.selected !== null ? 'disabled' : ''}>
              <span class="letter">${String.fromCharCode(65 + oi)}</span>
              <span>${opt}</span>
            </button>
          `;
        }).join('')}
      </div>
      ${quizState.selected !== null ? `<div class="quiz-explanation">ğŸ’¡ ${q.explanation}</div>` : ''}
    </div>
  `;
}
function quizSelect(idx) {
  if (quizState.selected !== null) return;
  quizState.selected = idx;
  const q = quizQuestions[quizState.current];
  quizState.answers.push({
    question: quizState.current, chosen: idx,
    correct: q.correct, isCorrect: idx === q.correct,
    category: q.category
  });
  renderQuiz();
  setTimeout(() => {
    if (quizState.current < quizQuestions.length - 1) {
      quizState.current++;
      quizState.selected = null;
      renderQuiz();
    } else {
      quizState.done = true;
      quizCompleted = true;
      renderQuiz();
    }
  }, 1800);
}
function renderQuizResults(c) {
  const score = quizState.answers.filter(a => a.isCorrect).length;
  const catScores = {};
  quizState.answers.forEach(a => {
    if (!catScores[a.category]) catScores[a.category] = { total: 0, correct: 0 };
    catScores[a.category].total++;
    if (a.isCorrect) catScores[a.category].correct++;
  });
  const weakAreas = Object.entries(catScores)
    .filter(([, v]) => v.correct < v.total)
    .sort((a, b) => (a[1].correct / a[1].total) - (b[1].correct / b[1].total));

  let html = `
    <div class="result-card">
      <div class="emoji">${score >= 8 ? 'ğŸ†' : score >= 5 ? 'ğŸ’ª' : 'ğŸ“š'}</div>
      <h2>${score}/10 richtig!</h2>
      <p class="msg">${score >= 8 ? 'IncrÃ­vel! Du bist ein Naturtalent!' : score >= 5 ? 'Bom trabalho! Solide Basis!' : 'NÃ£o desiste! Jeder fÃ¤ngt mal an!'}</p>
    </div>
    <button class="analysis-toggle" onclick="toggleAnalysis()">
      <h3>ğŸ” Schwachstellen-Analyse</h3>
      <span style="color:var(--red);font-size:14px;transition:transform 0.3s;${quizState.showAnalysis ? 'transform:rotate(180deg)' : ''}">â–¾</span>
    </button>
  `;

  if (quizState.showAnalysis) {
    if (weakAreas.length === 0) {
      html += `<div style="background:rgba(0,255,135,0.05);border:1px solid rgba(0,255,135,0.12);border-radius:16px;padding:22px;text-align:center;">
        <p style="font-size:15px;color:var(--green);">Perfekt! Keine Schwachstellen gefunden. Du bist bereit fÃ¼r Phase 2!</p>
      </div>`;
    } else {
      html += weakAreas.map(([cat, data]) => {
        const pct = (data.correct / data.total) * 100;
        const bg = data.correct === 0 ? 'var(--red)' : 'linear-gradient(90deg, var(--red), var(--amber))';
        return `
          <div class="weak-area">
            <div class="weak-area-head">
              <h4>âš ï¸ ${cat}</h4>
              <span class="score">${data.correct}/${data.total} richtig</span>
            </div>
            <div class="weak-bar"><div class="weak-bar-fill" style="width:${pct}%;background:${bg}"></div></div>
            <p class="weak-tip">${categoryTips[cat] || ''}</p>
          </div>
        `;
      }).join('');
    }

    html += `<h3 style="font-family:'Playfair Display',serif;font-size:19px;color:#fff;font-weight:600;margin:28px 0 14px;">ğŸ“ Alle Antworten im Detail</h3>`;
    html += quizState.answers.map((a, i) => {
      const q = quizQuestions[i];
      return `
        <div class="answer-review ${a.isCorrect ? 'right' : 'wrong'}">
          <div style="display:flex;gap:8px;align-items:flex-start;">
            <span style="font-size:17px;">${a.isCorrect ? 'âœ…' : 'âŒ'}</span>
            <div>
              <p style="font-size:14px;color:#ddd;font-weight:600;">${q.q}</p>
              ${!a.isCorrect ? `<p style="font-size:13px;color:var(--red);margin-top:4px;">Deine Antwort: ${q.options[a.chosen]}</p>` : ''}
              <p style="font-size:13px;color:var(--green);margin-top:2px;">Richtig: ${q.options[a.correct]}</p>
              <p style="font-size:12px;color:#777;margin-top:8px;line-height:1.6;">${q.explanation}</p>
            </div>
          </div>
        </div>
      `;
    }).join('');
  }

  html += `<button class="retry-btn" onclick="retryQuiz()">ğŸ”„ Quiz wiederholen</button>`;
  c.innerHTML = html;
}
function toggleAnalysis() {
  quizState.showAnalysis = !quizState.showAnalysis;
  renderQuiz();
}
function retryQuiz() {
  quizState = { current: 0, answers: [], selected: null, done: false, showAnalysis: false };
  renderQuiz();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONVERSA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderConversa() {
  const c = document.getElementById('conv-container');
  if (!quizCompleted && !convState.started) {
    c.innerHTML = `
      <div class="conv-locked">
        <span class="lock">ğŸ”’</span>
        <h3>Erst die Basics!</h3>
        <p>SchlieÃŸe das Quiz ab, um die tÃ¤gliche Konversation freizuschalten.</p>
      </div>
    `;
    return;
  }
  if (!convState.started) {
    c.innerHTML = `<div style="text-align:center;"><button class="start-btn" onclick="startConv()">ğŸ™ï¸ Conversa starten!</button></div>`;
    return;
  }
  let msgsHtml = convState.messages.map(m => {
    let html = `<div class="msg-row ${m.from}"><div class="msg-bubble ${m.from}">`;
    if (m.from === 'bot') html += `<span class="msg-tag">ğŸ‡§ğŸ‡· NATIVO</span>`;
    html += m.text + `</div></div>`;
    if (m.hint) html += `<div class="msg-hint">ğŸ’¡ ${m.hint}</div>`;
    return html;
  }).join('');
  c.innerHTML = `
    <div class="chat-container">
      <div class="chat-messages" id="chat-messages">${msgsHtml}</div>
      <div class="chat-input-bar">
        <input id="chat-input" placeholder="Schreib auf Portugiesisch..." onkeydown="if(event.key==='Enter')sendMsg()">
        <button class="send-btn" onclick="sendMsg()">Enviar â†’</button>
      </div>
    </div>
  `;
  const el = document.getElementById('chat-messages');
  if (el) el.scrollTop = el.scrollHeight;
}
function startConv() {
  convState.started = true;
  convState.messages = [{from:'bot', text: conversationFlow[0].bot, hint: conversationFlow[0].hint}];
  convState.botStep = 1;
  renderConversa();
}
function sendMsg() {
  const input = document.getElementById('chat-input');
  if (!input || !input.value.trim()) return;
  const text = input.value.trim();
  convState.messages.push({from:'user', text});
  renderConversa();
  if (convState.botStep < conversationFlow.length) {
    setTimeout(() => {
      let botText = conversationFlow[convState.botStep].bot;
      if (botText.includes('{name}')) {
        const name = text.replace(/meu nome Ã©|eu sou|me chamo/gi, '').trim() || 'amigo';
        botText = botText.replace('{name}', name);
      }
      convState.messages.push({
        from:'bot', text: botText,
        hint: conversationFlow[convState.botStep].hint
      });
      convState.botStep++;
      renderConversa();
    }, 1000);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderPhases();
renderRoomTabs();
renderRoom();
renderSlang();
renderQuiz();
renderConversa();
</script>
</body>
</html>
